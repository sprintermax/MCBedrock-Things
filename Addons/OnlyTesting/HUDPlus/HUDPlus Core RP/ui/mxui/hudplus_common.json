{
  "namespace": "hudplus_common",

  "hudp_custom_panels@hudplus_screen_defs.custom_screens": {},

  "hudplus_base_panel": {
    "type": "panel",
    "$debug_show_safezone_border|default": false, // For testing purposes, show safe zone screen limits
    "$hudplus_screen_prefix|default": "",
    "$ignore_screen_prefix|default": "(not $hudplus_screen_prefix > '')",
    "$ignore_hudplus_prefix|default": false,
    "$should_use_hud_opacity|default": false,
    "$hudplus_text_controller|default": "#hud_title_text_string",
    "$safezone_screen_content|default": "common.empty_panel",
    "$no_safezone_screen_content|default": "common.empty_panel",

    "$safezone_screen_animations|default": [],
    "$no_safezone_screen_animations|default": [],
    "controls": [
      {
        "debug_safezone_border@common.safezone_outer_matrix": {
          "$header_safezone_control": "common.empty_panel",
          "$header_bar_control": "common.empty_panel",
          "$screen_content": "common.focus_border_white",
          "ignored": "(not $debug_show_safezone_border)",
          "$debug_safezone_border_layer|default": 1,
          "layer": "$debug_safezone_border_layer",
          "size": ["100% + 2px", "100% + 2px"]
        }
      },
      {
        "safezone_content@common.safezone_outer_matrix": {
          "$screen_content": "$safezone_screen_content",
          "anims": "$safezone_screen_animations",
          "propagate_alpha": true,
          "layer": 3
        }
      },
      {
        "no_safezone_content_panel": {
          "type": "panel",
          "controls": [
            { "no_safezone_content@$no_safezone_screen_content": {} }
          ],
          "anims": "$no_safezone_screen_animations",
          "propagate_alpha": true,
          "layer": 2
        }
      }
    ],
    "variables": [
      {
        "requires": "not $should_use_hud_opacity",
        "$hudp_alpha_binding": "",
        "$hudp_propagate_alpha_binding": ""
      },
      {
        "requires": "$should_use_hud_opacity",
        "$hudp_alpha_binding": "#alpha",
        "$hudp_propagate_alpha_binding": "#propagateAlpha"
      }
    ],
    "bindings": [
      {
        "binding_name": "$hudplus_text_controller",
        "binding_name_override": "#hudp_text_controller"
      },
      {
        "binding_type": "view",
        "source_property_name": "($ignore_hudplus_prefix or ($ignore_screen_prefix and ('%.6s' * #hudp_text_controller = '_hud+:')) or ('%.14s' * #hudp_text_controller = '_hud+:' + $hudplus_screen_prefix) or ('%.19s' * #hudp_text_controller = '_hud+:noui:' + $hudplus_screen_prefix))",
        "target_property_name": "#visible"
      },
      {
        "binding_name": "#hud_alpha",
        "binding_name_override": "$hudp_alpha_binding"
      },
      {
        "binding_name": "#hud_propagate_alpha",
        "binding_name_override": "$hudp_propagate_alpha_binding"
      }
    ]
  }
}
